
not python 3

### Scripts

* forward script
  Forward mails from postfix to upload script

* upload
  Parse and upload a given mail. (Extract metadata, maybe get keywords)
  (needs python-requests)

* search
  Search for mail hashes by metadata (maybe even keywords)
  Results in a list of hashes and metadata (one-liners) in a file
  (as input to download or to look through by user).

* download
  Download mail / mails with a given hash into mbox file.

* parse mboxes
  Parse existing mailboxes, ask user give mails to upload script.

### Document format

doc_id: sha256 hash of whole mail as in 'data' field
upload_date: date UTC, when the mail was uploaded in YYYY-MM-DD hh:mm:ss
            `date "+%Y-%M-%d %H:%m:%S"` i.e. 2013-12-08 11:12:42
flag: signed, encrypted
labels: list of unique label names

date: date UTC given in mail, in YYYY-MM-DD hh:mm:ss
from: array of email addresses of senders
to: array of email addresses of receivers
subject: string containing subject

original message as standalone attachment in named 'mail'
  with content-type: text/plain

### Database Views

  from

Emits one entry for every sender in From: field of a mail.
So you can search with
.../_design/post/_view/from?startkey=%22someone%22&endkey=%22xaver%22
Key: one address spec
Value: doc

  to

Emits one entry for every recipient in To: field of a mail.
Key: one address spec
Value: doc

  labels

Emits one entry for every label listed in doc.labels .
Key: one label string
Value: doc

  labels_list

A list of all labels used anywhere.
Functions: Map & Reduce
Key: Null
Value: List of all labels

  inbox

All mails with labeled "unread".
Functions: Map
Key: date
Value: flags
